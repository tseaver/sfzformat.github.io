<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">

		<title>SFZ1 modulations - SFZ Format</title>

		<meta name="author" content="Karoryfer Samples and SFZ Format Team">
		<meta name="web-author" content="RedTide and SFZ Format Team">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- Atom Feeds -->
		<link href="/atom.xml" rel="alternate" type="application/atom+xml" />

		<!-- Favicon Generator Icons -->
		<link rel="apple-touch-icon" sizes="152x152" href="/assets/ico/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/assets/ico/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/assets/ico/favicon-16x16.png">
		<link rel="manifest" href="/assets/ico/site.webmanifest">
		<link rel="mask-icon" href="/assets/ico/safari-pinned-tab.svg" color="#5bbad5">
		<link rel="shortcut icon" href="/assets/ico/favicon.ico">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="msapplication-config" content="/assets/ico/browserconfig.xml">
		<meta name="theme-color" content="#ffffff">

		<!-- Stylesheets -->
		<link href="/assets/css/style.min.css" rel="stylesheet" media="screen">
		<link rel="stylesheet" type="text/css" href="/assets/css/prettify.css">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css" rel="stylesheet">

		<!-- Font Awesome Icons -->
		<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/solid.js"       integrity="sha384-Mf3ap7OwO+bjTkzM1RsrothLh38uKXvMWJ2TQPXGHqZcqfeI/cyCV+sfV0IDnBDq" crossorigin="anonymous"></script>
		<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/brands.js"      integrity="sha384-b2GpqFrJizV0BUEdbrITdOA5HnxnlrErt7MlEERWd6NSJ32rHeibEvyyCuA13OAS" crossorigin="anonymous"></script>
		<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/fontawesome.js" integrity="sha384-EYYaHDhIRoBhd/Ir/1fPnxg9rZLk/55lKtlNT5KrIcONoCS2kjf7ZWzMoCLLACeo" crossorigin="anonymous"></script>

	</head>

	<body>

		<button onclick="topFunction()" id="scrollButton" title="Go to top">Top</button>
		<a href="#content" class="sr-only">Skip to content</a>
		<div class="container">

			<nav class="navbar navbar-expand-lg navbar-dark" style="background-color:#222">
				<a class="navbar-brand" href="/">
					<img src="/assets/img/logo.png"
					width="120" height="30" class="d-inline-block align-top" alt=""></a>

				<button class="navbar-toggler" type="button" data-toggle="collapse"
					data-target="#navbarContent" aria-controls="navbarContent"
					aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarContent">
					<ul class="navbar-nav mr-auto mt-2 mt-lg-0">


	
		
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarSyntax"
								data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false"> Syntax</a>
							<div class="dropdown-menu" aria-labelledby="navbarSyntax">
		
			
								<a class="dropdown-item"
									href="/headers/">Headers</a>
			
		
			
								<a class="dropdown-item"
									href="/opcodes/">Opcodes</a>
			
		
			
								<div class="dropdown-divider"></div>
			
		
			
								<a class="dropdown-item"
									href="/modulations/">Modulations</a>
			
		
			
								<a class="dropdown-item"
									href="/modulations/envelope_generators">Envelope Generators</a>
			
		
			
								<a class="dropdown-item"
									href="/modulations/lfo">LFO</a>
			
		
			
								<div class="dropdown-divider"></div>
			
		
			
								<a class="dropdown-item"
									href="/extensions/midi_ccs">Extended MIDI CCs</a>
			
		
			
								<div class="dropdown-divider"></div>
			
		
			
								<a class="dropdown-item"
									href="/misc/categories">Types & Categories</a>
			
		
							</div>
	
						</li>

	
		
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarSoftware"
								data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false"> Software</a>
							<div class="dropdown-menu" aria-labelledby="navbarSoftware">
		
			
								<a class="dropdown-item"
									href="https://sfzinstruments.github.io">Instruments</a>
			
		
			
								<a class="dropdown-item"
									href="/software/players">Players</a>
			
		
			
								<a class="dropdown-item"
									href="/software/tools">Tools</a>
			
		
							</div>
	
						</li>

	
		
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarTutorials"
								data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false"> Tutorials</a>
							<div class="dropdown-menu" aria-labelledby="navbarTutorials">
		
			
								<a class="dropdown-item"
									href="/tutorials/basics">Basics</a>
			
		
			
								<div class="dropdown-divider"></div>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/basic_sfz_file">Basic / Template</a>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/sustained_note_basics">Sustained Note Basics</a>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/vibrato">Vibrato</a>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/legato">Legato</a>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/unison">Unison</a>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/subtractive_synths">Subtractive Synthesizers</a>
			
		
			
								<div class="dropdown-divider"></div>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/drum_basics">Drum Basics</a>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/cymbal_muting">Cymbal Muting</a>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/brush_stirs">Brush Stirs</a>
			
		
			
								<div class="dropdown-divider"></div>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/sfz1_modulations">SFZ 1 Modulations</a>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/sfz2_modulations">SFZ 2 Modulations</a>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/lfo">Pitch LFO Examples</a>
			
		
			
								<div class="dropdown-divider"></div>
			
		
			
								<a class="dropdown-item"
									href="/tutorials/videos">Video Tutorials</a>
			
		
							</div>
	
						</li>

	
		
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarDocs"
								data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false"> Docs</a>
							<div class="dropdown-menu" aria-labelledby="navbarDocs">
		
			
								<a class="dropdown-item"
									href="/docs/website-development-reference">Website Development Reference</a>
			
		
			
								<a class="dropdown-item"
									href="/docs/jekyll-windows-setup">Jekyll Setup on Windows</a>
			
		
			
								<a class="dropdown-item"
									href="/docs/adding-multimedia-content">Add Multimedia Content</a>
			
		
							</div>
	
						</li>

	
						<li class="nav-item">
							<a class="nav-link"
								href="/news"> News</a>
	
						</li>

						<li class="nav-item">
							<a class="nav-link"
								href="/search/">
								Search</a>
						</li>
					</ul>
				</div>
			</nav>

			<div class="row mt-4" id="content">
				<div class="col-md-9">
					<article><h1>SFZ1 modulations</h1><p>The set of <a href="/modulations/index">modulations</a> available under the SFZ1 specification is fixed, and
there’s a dedicated opcode for every possible modulation, including fairly
esoteric ones such as using note velocity to modulate the hold stage of the
pitch envelope.</p>
      <h2 id="basic-midi-cc-modulation">
        
        
          Basic MIDI CC modulation <a href="#basic-midi-cc-modulation" class="toc-anchor">#</a>
        
        
      </h2>

<p>A few opcodes can be modulated simply by MIDI CC, with the modulation adding
to what the opcode would normally do. These are: <a href="/opcodes/offset">offset</a> and
<a href="/opcodes/delay">delay</a>.</p>

<p>For example, this would have a sample offset of 500 when the modulating CC is
at 0, and a sample offset of 1000 when the modulating CC is at max:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>offset=500
offset_cc100=500
</code></pre></div></div>

<p>It’s also possible to just specify the modulation, in which case the
default value is what will be modulated. The defaults for offset, delay and
EQ band gain are 0, so this would result in the offset being modulated between
0 and 1000:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>offset_cc100=1000
</code></pre></div></div>
    
      <h2 id="modulating-default-values">
        
        
          Modulating default values <a href="#modulating-default-values" class="toc-anchor">#</a>
        
        
      </h2>

<p>The three EQ bands’ <a href="/opcodes/eqN_freq">frequency</a>, <a href="/opcodes/eqN_bw">bandwidth</a> and
<a href="/opcodes/eqN_gain">gain</a> work similarly, but also add velocity tracking. The EQ
bandwidth and center frequency also have non-zero defaults,
for example eq2_freq is 500 if not specified. So, this would modulate the center
frequency of the second EQ band between 500 and 1500 if eq2_freq is left at default:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eq2_freqcc110=1000
</code></pre></div></div>
    
      <h2 id="velocity-tracking-keytracking-and-randomization">
        
        
          Velocity tracking, keytracking and randomization <a href="#velocity-tracking-keytracking-and-randomization" class="toc-anchor">#</a>
        
        
      </h2>

<p>EQ <a href="/opcodes/eqN_vel2freq">frequency</a> and <a href="/opcodes/eqN_vel2gain">gain</a> (but not
bandwidth) can additionally be modulated by velocity. For example, if we want to
make a sound brighter when the velocity is higher, we might use something like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eq1_vel2gain=-6
eq2_vel2gain=12
eq2_vel2freq=500
</code></pre></div></div>

<p>The <a href="/opcodes/xfin_loccN">xfin</a>/<a href="/opcodes/xfout_loccN">xfout</a> CCs are also a
way to fade sounds in and out using MIDI CC. An example of one note with two
dynamic layers being crossfaded:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;region&gt;sample=e4_ft_p.wav xfin_locc1=0 xfin_hicc1=63 xfout_locc1=64 xfout_hicc1=127
&lt;region&gt;sample=e4_ft_f.wav xfin_locc1=64 xfin_hicc1=127
</code></pre></div></div>

<p>In addition to MIDI CC, crossfades can also use MIDI note number and velocity as
modulation sources, and the <a href="/opcodes/xf_cccurve">xf_cccurve</a>, <a href="/opcodes/xf_keycurve">xf_keycurve</a>
and <a href="/opcodes/xf_velcurve">xf_velcurve</a> give the choice of two curves for each of these modulations.</p>

<p>More sophisticated modulations are possible with volume,
pitch and <a href="/opcodes/cutoff">filter cutoff</a>. Volume and cutoff can be modulated by MIDI CC directly
(pitch can’t in SFZ1 - the tune_ccN modulation is an ARIA extension). All three
can also have randomization applied and be modulated by MIDI note number and
velocity. The nomenclature for volume is a little confusing, with <a href="/opcodes/volume">gain_ccN</a> using
“gain” in the name, while the others are called <a href="/opcodes/amp_random">amp_random</a>,
<a href="/opcodes/amp_keytrack">amp_keytrack</a> and <a href="/opcodes/amp_veltrack">amp_veltrack</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gain_cc80=-6
amp_random=3
amp_keytrack=-1.3
amp_veltrack=80
</code></pre></div></div>
    
      <h2 id="lfos-and-envelopes">
        
        
          LFOs and envelopes <a href="#lfos-and-envelopes" class="toc-anchor">#</a>
        
        
      </h2>

<p>Volume, filter and cutoff also each get an <a href="/modulations/lfo#sfz-1-lfos">LFO</a> and an
<a href="/modulations/envelope_generators#sfz-1-egs">envelope</a>. The LFO rate and
depth can be modulated by MIDI CC. Each LFO also has a simple envelope with
delay and fade, but modulating the duration of these is not allowed under the
SFZ1 spec (though it is with SFZ2 LFOs). Here’s a typical pitch vibrato LFO:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pitchlfo_freq=2
pitchlfo_freqcc50=10
pitchlfo_depthcc51=33
</code></pre></div></div>

<p>Each envelope parameter can also be modulated by CC, or by velocity. Here’s a
exmple setup for a synth-style ADSR volume envelope (hold is not specified so the
default hold value of 0 is used) controlled by CCs and some initial
minimum values set for attack and release, along with a default sustain of 0:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ampeg_attack=0.001
ampeg_attack_oncc40=1
ampeg_decay_oncc41=4
ampeg_sustain=1
ampeg_sustain_oncc42=100
ampeg_release=0.1
ampeg_release_oncc43=0.9
</code></pre></div></div>

<p>Modulating envelope parameters with velocity allows, for example, setting up a filter
on an acid bass which will sweep farther with higher velocity, and also sweep faster.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cutoff=120
resonance=12
fileg_attack=0.5
fileg_decay=1
fileg_depth=500
fileg_vel2attack=-0.4
fileg_vel2decay=-0.8
fileg_vel2depth=4000
</code></pre></div></div>

<p>If something is not described above, then modulating it is not possible under the
SFZ1 specification, and will require <a href="/tutorials/sfz2_modulations">using SFZ2</a>
or possibly some extension opcodes.</p>
					</article>
				</div>
				<div class="col-md-3">
					<aside>

	
						<div class="card border-dark mb-3">
							<div class="card-header text-light"
								style="background-color:#222">
								<i class="fas fa-eye"
									aria-hidden="true"></i>
								Follow us
							</div>
							<div class="card-body" style="padding: 0.5rem">
								<ul class="nav nav-pills flex-column">
	<li class="nav-item">
										<a class="nav-link" href="https://discord.gg/t7nrZ6d"
											title="Discord Chat" style="padding: 0.35rem 0.25rem">
										<i class="fab fa-discord fa-fw"
										aria-hidden="true"></i>
										Discord Chat</a>
									</li>
	<li class="nav-item">
										<a class="nav-link" href="https://kiwiirc.com/nextclient/#irc://irc.freenode.net:+6697/#sfzformat"
											title="Internet Relay Chat" style="padding: 0.35rem 0.25rem">
										<i class="fas fa-hashtag fa-fw"
										aria-hidden="true"></i>
										IRC</a>
									</li>
	<li class="nav-item">
										<a class="nav-link" href="https://github.com/sfzformat/"
											title="GitHub Organization" style="padding: 0.35rem 0.25rem">
										<i class="fab fa-github fa-fw"
										aria-hidden="true"></i>
										GitHub Organization</a>
									</li>
	<li class="nav-item">
										<a class="nav-link" href="/atom.xml"
											title="News Atom Feed" style="padding: 0.35rem 0.25rem">
										<i class="fas fa-rss fa-fw"
										aria-hidden="true"></i>
										News Atom Feed</a>
									</li>
	
								</ul>
							</div>
						</div>

						<div class="card border-dark mb-3">
							<div class="card-header text-light"
								style="background-color:#222">
								<i class="fas fa-link"
									aria-hidden="true"></i>
								Quick links
							</div>
							<div class="card-body" style="padding: 0.5rem">
								<ul class="nav nav-pills flex-column">
	<li class="nav-item">
										<a class="nav-link" href="/legacy"
											title="Old rgc:audio SFZ page" style="padding: 0.35rem 0.25rem">
										<i class="fas fa-book fa-fw"
										aria-hidden="true"></i>
										Old rgc:audio SFZ page</a>
									</li>
	<li class="nav-item">
										<a class="nav-link" href="http://www.drealm.info/sfz/"
											title="Peter L. Jones' SFZ page" style="padding: 0.35rem 0.25rem">
										<i class="fas fa-book fa-fw"
										aria-hidden="true"></i>
										Peter L. Jones' SFZ page</a>
									</li>
	<li class="nav-item">
										<a class="nav-link" href="https://www.kvraudio.com/forum/viewtopic.php?f=42&t=508861"
											title="KVR Forum SFZ post" style="padding: 0.35rem 0.25rem">
										<i class="fas fa-users fa-fw"
										aria-hidden="true"></i>
										KVR Forum SFZ post</a>
									</li>
	<li class="nav-item">
										<a class="nav-link" href="https://www.plogue.com/plgfrms/viewforum.php?f=14"
											title="Plogue Forum" style="padding: 0.35rem 0.25rem">
										<i class="fas fa-users fa-fw"
										aria-hidden="true"></i>
										Plogue Forum</a>
									</li>
	<li class="nav-item">
										<a class="nav-link" href="https://sfzinstruments.github.io/"
											title="Free SFZ Instruments" style="padding: 0.35rem 0.25rem">
										<i class="fas fa-download fa-fw"
										aria-hidden="true"></i>
										Free SFZ Instruments</a>
									</li>
	<li class="nav-item">
										<a class="nav-link" href="https://github.com/sfz/tests/"
											title="rgc:audio SFZ test suite" style="padding: 0.35rem 0.25rem">
										<i class="fas fa-download fa-fw"
										aria-hidden="true"></i>
										rgc:audio SFZ test suite</a>
									</li>
	<li class="nav-item">
										<a class="nav-link" href="https://github.com/sfz/opcode-suggestions/"
											title="Opcode suggestions" style="padding: 0.35rem 0.25rem">
										<i class="fas fa-lightbulb fa-fw"
										aria-hidden="true"></i>
										Opcode suggestions</a>
									</li>
	
								</ul>
							</div>
						</div>



					</aside>
				</div>
			</div>
			<hr>
			<footer>
				<p>
					This site is open source.
					<a href="https://github.com/sfzformat/sfzformat.github.io/edit/source/tutorials/sfz1_modulations.md">
					Improve this page</a>
				</p>
			</footer>

		</div>
		<script src="/assets/js/scripts.min.js"></script>		<script type="text/javascript" src="/assets/js/prettify/prettify.min.js"></script>
		<script type="text/javascript" src="/assets/js/prettify/lang-sfz.js"></script>
		<script>
			$(document).ready(function(){
			$('pre').addClass('prettyprint lang-sfz');
			prettyPrint();
			});
		</script>
		<script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js"></script>
		<script>
		$(document).on('click', '[data-toggle="lightbox"]', function(event) {
			event.preventDefault();
			$(this).ekkoLightbox({
				alwaysShowClose: true
			});
		});
		</script>


	</body>
</html>
